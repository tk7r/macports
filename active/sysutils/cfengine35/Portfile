# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 103062 2013-02-13 00:42:13Z larryv@macports.org $

PortSystem          1.0

name                cfengine35
conflicts           cfengine cfengine3 cfengine36
version             3.5.3
revision            1
categories          sysutils
platforms           darwin
license             GPL-3
maintainers         lausa.at:thomas.kotzian
description         network configuration-management tool
long_description    Configuration Management Software for Agile System Administrators. \
                    Leading open source configuration management software ensuring the \
                    availability, security and compliance of mission critical \
                    applications and services.
homepage            http://cfengine.com/
distname            cfengine-${version}
worksrcdir          cfengine-${version}
master_sites        https://s3.amazonaws.com/cfengine.package-repos/tarballs/
checksums           md5     c840eb0163924ca657ab180fe5a170b4 \
                    sha512  20ead13d5290905dc51567887807a0c2c5d9d753cb48ffe2859041b75239698ad0f4bee1ad0eac4eee96122b3a5a475d516566c1571c4fcbc460be757583da18 \
                    rmd160  1d99f73fc77f89842293e78d6521edb516c508c3

destroot.violate_mtree      yes

depends_lib         port:tokyocabinet \
                    port:pcre \
                    port:libxml2

patchfiles          patch-fchownat.diff \
                    patch-clang-fix.diff

configure.args      --disable-dependency-tracking \
                    --prefix=/var/cfengine \
                    --with-workdir=/var/cfengine \
                    --with-tokyocabinet=${prefix} \
                    --with-openssl=${prefix} \
                    --with-pcre=${prefix} \
                    --without-mysql \
                    --without-postgresql

livecheck.type      regex
livecheck.url       ${homepage}source-code
livecheck.regex     "cfengine-(\\d+(?:\\.\\d+)*).tar.gz"

startupitem.create      yes
startupitem.name        cfengine35
startupitem.executable  /var/cfengine/bin/cf-execd -F
